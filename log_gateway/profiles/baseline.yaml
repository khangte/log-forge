# -----------------------------------------------------------------------------
# 파일명 : log_gateway/profiles/baseline.yaml
# 목적   : log_gateway 시뮬레이터의 기본 부하 프로파일(믹스/에러율/시간대 가중치) 정의
# 사용   : generator 및 /simulate API가 load_profile()을 통해 읽어와 로그 생성에 활용
# 설명   :
#   - rps/mix/error_rate/bursts/time_weights/weight_mode/env 필드를 지원
#   - base rps × time_weights multiplier → bursts 적용 순서로 최종 RPS를 결정
# -----------------------------------------------------------------------------

# duration_sec: 300          # 5분
rps: 600                  # 초당 600건(시간대 가중치/버스트로 변동)

mix:
  auth: 0.20
  order: 0.40
  payment: 0.30
  notify: 0.10

error_rate:
  auth: 0.01
  order: 0.02
  payment: 0.03
  notify: 0.005

bursts:
  - { at_sec: 60,  rps: 900 }   # 1분 시점부터 900 rps
  - { at_sec: 180, rps: 500 }   # 3분 시점부터 500 rps

time_weights:
  - { range: "0-7",   weight: [0.20, 0.40] }
  - { range: "8-11",  weight: [0.10, 0.30] }
  - { range: "12-13", weight: [0.05, 0.15] }
  - { range: "14-18", weight: [0.10, 0.30] }
  - { range: "19-23", weight: [0.15, 0.35] }

weight_mode: "uniform"
env: "dev"
