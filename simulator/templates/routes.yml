# -----------------------------------------------------------------------------
# 파일명 : simulator/templates/routes.yml
# 목적   : 서비스별 엔드포인트 목록과 가중치(weight) 정의
# 사용   : runner가 프로파일의 mix(서비스 비율)로 서비스 선택 → 각 서비스
#          시뮬레이터가 이 파일의 라우트들 중 weight 기반으로 경로/메서드를 선택
#
# 스키마 :
# routes:
#   <service_name>:
#     - path: "/v1/..."          # 필수. 절대 경로 문자열
#       methods: ["GET","POST"]  # 선택. 없으면 ["GET"]로 간주
#       weight: 1                # 선택. 기본 1. 높을수록 더 자주 선택
#
# 팁:
# - weight는 상대빈도임(합은 상관없음). 직관적으로 경로별 트래픽 분포를 잡는 용도.
# - path는 고정 문자열로 두어도 되고, 필요하면 시뮬레이터에서 {id} 같은 토큰을
#   실제 값으로 치환하는 로직을 후에 추가할 수 있음(현재는 고정 문자열로 사용).
# - 서비스별 엔드포인트 수를 과하게 늘리기보다, 대표 경로 몇 개를 두고
#   weight로 비중을 조절하는 편이 단순하고 효과적임.
# -----------------------------------------------------------------------------

routes:
  # --------------------------
  # 인증 도메인 (auth)
  # --------------------------
  auth:
    - { path: "/v1/login",   methods: ["POST"],       weight: 6 }
    - { path: "/v1/signup",  methods: ["POST"],       weight: 2 }
    - { path: "/v1/profile", methods: ["GET"],        weight: 3 }
    - { path: "/v1/logout",  methods: ["POST","GET"], weight: 1 }

  # --------------------------
  # 주문 도메인 (order)
  # --------------------------
  order:
    - { path: "/v1/orders",           methods: ["POST","GET"], weight: 6 }
    - { path: "/v1/orders/{id}",      methods: ["GET"],        weight: 3 }
    - { path: "/v1/orders/{id}/pay",  methods: ["POST"],       weight: 2 }
    - { path: "/v1/orders/{id}/cancel", methods: ["POST"],     weight: 1 }

  # --------------------------
  # 결제 도메인 (payment)
  # --------------------------
  payment:
    - { path: "/v1/payments",         methods: ["POST"],       weight: 6 }
    - { path: "/v1/refunds",          methods: ["POST"],       weight: 2 }
    - { path: "/v1/payments/{id}",    methods: ["GET"],        weight: 2 }
    - { path: "/v1/refunds/{id}",     methods: ["GET"],        weight: 1 }

  # --------------------------
  # 알림 도메인 (notify)
  # --------------------------
  notify:
    - { path: "/v1/notify/email",     methods: ["POST"],       weight: 3 }
    - { path: "/v1/notify/sms",       methods: ["POST"],       weight: 2 }
    - { path: "/v1/notify/push",      methods: ["POST"],       weight: 2 }
    - { path: "/v1/notify/status",    methods: ["GET"],        weight: 1 }
